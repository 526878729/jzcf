<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Expires" content="0"/>
    <title>金筑财富</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
<audio id="audio-bg" src="audio/bg.mp3" autoplay="autoplay" loop></audio>
<div class="container">
    <div class="all_page">
        <section class="page page1 retina_bg">
            <div class="page_container">
                <div class="page_background retina_bg"></div>
                <div class="page1-float-square retina_bg"></div>
                <!--左上角浮动正方体-->
                <div class="page1-float--small-polygon retina_bg"></div>
                <!--右上角浮动多面体-->
                <div class="page1-center-circle retina_bg"></div>
                <!--中心大圆圈-->
                <div class="page1-center-circle-two retina_bg"></div>
                <!--外面第二层圈-->
                <div class="opa-container">
                    <div class="page1-circle-line retina_bg"></div>
                    <!--中心圈旁的虚线圈-->
                </div>
                <div class="opa-container">
                    <div class="page1-half-yellow-line1 retina_bg"></div>
                    <!--上方旋转线条-->
                </div>
                <div class="opa-container">
                    <div class="page1-half-yellow-line2 retina_bg"></div>
                    <!--下方旋转线条-->
                </div>
                <div class="page1-hello-world retina_bg"></div>
                <!--你好文字-->
                <div class="page1-center－line retina_bg"></div>
                <!--文字下的钻石分割线-->
                <div class="page1-jinzhu-wealth retina_bg"></div>
                <!--金筑文字-->
                <div class="page1-float-triangle retina_bg"></div>
                <!--右下角三角体-->
                <div class="page1-float-big-polygon retina_bg"></div>
                <!--左下角大多面体-->
                <div class="page1-line-left"></div>
                <!--日期文字左边线-->
                <div class="page1-line-right"></div>
                <!--日期文字右边线-->
                <div class="page1-2016online retina_bg"></div>
                <!--日期文字-->
                <div class="music-icon retina_bg"></div>
            </div>
            <div class="bottom_arrow retina_bg"></div>
        </section>
        <section class="page page2 retina_bg">
            <div class="page_container">
                <div class="page_background retina_bg"></div>
                <div class="page2_circle_container">
                    <div class="page2_icon1 retina_bg"></div>
                    <div class="page2_icon2 retina_bg"></div>
                    <div class="page2_icon3 retina_bg"></div>
                    <div class="page2_icon4 retina_bg"></div>
                    <div class="page2_icon5 retina_bg"></div>
                    <div class="page2_background-circle retina_bg"></div>
                    <div class="page2_twostar retina_bg"></div>
                    <div class="page2_twostar_container retina_bg"></div>
                    <div class="page2_icon3-professional-team retina_bg"></div>
                    <div class="page2_icon5-legal retina_bg"></div>
                    <div class="page2_icon4-capital retina_bg"></div>
                    <div class="page2_icon2-government-support retina_bg"></div>
                </div>
                <div class="page2-introduce retina_bg">
                    <div class="page2-who-we-are retina_bg"></div>
                    <div class="page2-introductionsquare retina_bg"></div>
                    <div class="page2-introduction retina_bg"></div>
                </div>
                <div class="music-icon retina_bg"></div>
            </div>
            <div class="bottom_arrow retina_bg"></div>
        </section>
        <section class="page page3 retina_bg">
            <div class="page_container">
                <div class="page_background retina_bg"></div>
                <div class="page3-rotate-ball-funds-opacity retina_bg">
                    <div class="page3-rotate-ball-funds retina_bg"></div>
                </div>
                <div class="page3-funds retina_bg"></div>
                <div class="page3-logo-opacity retina_bg">
                    <div class="page3-logo-smallball retina_bg"></div>
                </div>
                <div class="page3-logo retina_bg"></div>
                <div class="page3-introduction retina_bg"></div>
                <div class="page3-rotate-ball-hpservice-opacity retina_bg">
                    <div class="page3-rotate-ball-hpservice retina_bg"></div>
                </div>
                <div class="page3-icon3-hpservice retina_bg"></div>
                <div class="page3-rotate-ball-techfunnd-opacity retina_bg">
                    <div class="page3-rotate-ball-techfunnd retina_bg"></div>
                </div>
                <div class="page3-techfunds retina_bg"></div>
                <div class="page3-ufo retina_bg"></div>
                <div class="page3-ball-light retina_bg"></div>
                <div class="page3-hope-square retina_bg"></div>
                <div class="page3-hope retina_bg"></div>
                <div class="music-icon retina_bg"></div>
            </div>
            <div class="bottom_arrow retina_bg"></div>
        </section>
        <section class="page page4 retina_bg">
            <div class="page_container">
                <div class="page_background retina_bg"></div>
                <div class="page4-introduction-square retina_bg"></div>
                <!--顶部框-->
                <div class="page4-title retina_bg"></div>
                <!--顶部框内标题文字-->
                <div class="page4-introduction retina_bg"></div>
                <!--顶部框下的文字-->
                <div class="page4-icon1 retina_bg"></div>
                <!--圈圈图标1-->
                <div class="page4-icon1-words retina_bg"></div>
                <!--图标1右边文字-->
                <div class="page4-line1 retina_bg"></div>
                <!--斜线1-->
                <div class="page4-icon2 retina_bg"></div>
                <!--圈圈图标2-->
                <div class="page4-icon2-words"></div>
                <!--图标2右边文字-->
                <div class="page4-line2 retina_bg"></div>
                <!--斜线2-->
                <div class="page4-icon3 retina_bg"></div>
                <!--圈圈图标3-->
                <div class="page4-icon3-words retina_bg"></div>
                <!--图标3右边文字-->
                <div class="page4-line3 retina_bg"></div>
                <!--斜线3-->
                <div class="page4-icon4 retina_bg"></div>
                <!--圈圈图标4-->
                <div class="page4-icon4-words retina_bg"></div>
                <!--图标4右边文字-->
                <div class="music-icon retina_bg"></div>
            </div>
            <div class="bottom_arrow retina_bg"></div>
        </section>
        <section class="page page5 retina_bg">
            <div class="page_container">
                <div class="page_background retina_bg"></div>
                <div class="page5_introduction_square retina_bg"></div>
                <div class="page5_4s retina_bg"></div>
                <div class="page5_icon1_building retina_bg"></div>
                <div class="page5-square1 retina_bg"></div>
                <!--介绍框1-->
                <div class="page5-introduction1 retina_bg"></div>
                <!--文字1-->
                <div class="page5-line1 retina_bg"></div>
                <!--箭头1-->
                <div class="page5-square2 retina_bg"></div>
                <!--介绍框2-->
                <div class="page5-introduction2 retina_bg"></div>
                <!--文字2-->
                <div class="page5-icon2-coin-paper retina_bg"></div>
                <!--钱堆图标-->
                <div class="page5-line2 retina_bg"></div>
                <!--箭头2-->
                <div class="page5-icon3-two-people retina_bg"></div>
                <!--用户图标-->
                <div class="page5-square3 retina_bg"></div>
                <!--介绍框3-->
                <div class="page5-introduction3 retina_bg"></div>
                <!--文字3-->
                <div class="page5-line3 retina_bg"></div>
                <!--箭头3-->
                <div class="page5-square4 retina_bg"></div>
                <!--介绍框4-->
                <div class="page5-introduction4 retina_bg"></div>
                <!--文字4-->
                <div class="page5-icon4-coin retina_bg"></div>
                <!--小钱堆-->
                <div class="music-icon retina_bg"></div>
            </div>
            <div class="bottom_arrow retina_bg"></div>
        </section>
        <section class="page page6 retina_bg">
            <div class="page_container">
                <div class="page_background retina_bg"></div>
                <div class="page6_time_square retina_bg"></div>
                <div class="page6_time_no_old retina_bg"></div>
                <div class="page6_link retina_bg"></div>
                <div class="page6_background_diamond retina_bg"></div>
                <div class="page6_addcode retina_bg"></div>
                <div class="page6_wave_line retina_bg"></div>
                <div class="page6_center_line1 retina_bg"></div>
                <div class="page6_center_line2 retina_bg"></div>
                <div class="page6_2D_CODE retina_bg"></div>
                <div class="music-icon retina_bg"></div>
            </div>
            <div class="bottom_arrow retina_bg"></div>
        </section>
        <!--<section class="page page0 retina_bg">-->
        <!--<div class="page_container">-->
        <!--<div class="page0_circle retina_bg"></div>-->
        <!--<div class="page0_diamond retina_bg"></div>-->
        <!--<div class="page0_loading_number">0%</div>-->
        <!--</div>-->
        <!--</section>-->
    </div>
</div>
<script src="http://cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
<script src="js/jquery.transit.min.js"></script>
<script src="js/Tocca.min.js"></script>

<script>
    if (typeof State == "undefined") {
        var State = {};
        State.Loading = 0;
        State.Switching = 1;
        State.Animating = 2;
        State.Idel = 3;
    }

    var currentState = State.Idel;

    (function ($, document) {
        document.addEventListener('touchstart', function (e) {
            e.preventDefault()
        }, false)

        var ua = navigator.userAgent;
        var firefox = /firefox/i.test(ua);

        var ratio = document.body.clientHeight / document.body.clientWidth;

        var scale = document.body.clientWidth / 640;
        var height = document.body.clientHeight / scale;

        var imgList = [
            "background.jpg",
            "bottom_arrow.png"
        ];

        $(".container").css("height", height);

        if (firefox) {
            $(".container").css("transform", "scale(" + scale + ")");
            $(".page_container").css("transform", "scale(" + height / 1027.0 + ")");
            $(".page_container").css("left", (1027 / (ratio) - 640) / 2);
        } else {
            $(".container").css("zoom", scale);
            $(".page_container").css("zoom", height / 1027.0);
            $(".page_container").css("left", (1027 / (ratio) - 640) / 2);
        }

        var pageName = [".page3", ".page1", ".page2", ".page4", ".page5", ".page6"];
        var currentPageNumber = 0;

        for (var i = 0; i < pageName.length; i++) {
            $(pageName[i]).css("top", i * height);
        }

        function showPreviousPage() {
            if (currentPageNumber > 0) {
                var currentPage = $(pageName[currentPageNumber--]);
                var comingPage = $(pageName[currentPageNumber]);

                currentState = State.Switching;
                $(".bottom_arrow").hide();

                comingPage.show();

                $(".all_page").transition({transform: 'translateY(' + -height * currentPageNumber + 'px)'}, 1000, function () {
                    currentPage.hide();
                    currentPage.removeClass("animate");
                    setTimeout(function () {
                        comingPage.addClass("animate");
//            currentState = State.Animating;
                        currentState = State.Idel;
                    }, 200);
                });
//        $(".all_page").removeClass("movePage");
            }
        }

        function showNextPage() {
            if (currentPageNumber < pageName.length - 1) {
                var currentPage = $(pageName[currentPageNumber++]);
                var comingPage = $(pageName[currentPageNumber]);

                currentState = State.Switching;
                $(".bottom_arrow").hide();

                comingPage.show();

                $(".all_page").transition({transform: 'translateY(' + -height * currentPageNumber + 'px)'}, 1000, function () {
                    currentPage.hide();
                    currentPage.removeClass("animate");
                    setTimeout(function () {
                        comingPage.addClass("animate");
//            currentState = State.Animating;
                        currentState = State.Idel;
                    }, 200);
                });
//        $(".all_page").addClass("movePage");
            }
        }

        var progress = 0;

        var setProgress = function (value) {
//      var progressTranslateX = value / 100.0 * 430;
//      $(".page0_progress").css('transform', "translateX(" + progressTranslateX + "px)");
//      $(".page0_progress").css("-webkit-transform", "translateX(" + progressTranslateX + "px)");
//      var rocketTranslateX = value / 100.0 * 345;
//      $(".page0_rocket").css('transform', "translateX(" + rocketTranslateX + "px)");
//      $(".page0_rocket").css("-webkit-transform", "translateX(" + rocketTranslateX + "px)");
//
//      $(".page0_loading_number").html(value + "%");

            progress = value;

            if (progress == 100) {
                var firstPageName = pageName[0];
                $(firstPageName).show();
////////////////////////////// Test ///////////////////////////////
                setTimeout(function () {
                    $(firstPageName).addClass("animate");
                }, 1);
////////////////////////////// Test ///////////////////////////////
//        $(".page0").transition({opacity: 0}, 1000, function () {
//          $(".page0").hide();
//          $(firstPageName).addClass("animate");
//          currentState = State.Animating;
//        });
            }
        };
        var imgCount = imgList.length;
        var imgLoaded = 0;
        var imageElement = [];

        currentState = State.Loading;

        for (var i = 0; i < imgCount; i++) {
            imageElement[i] = document.createElement("img");

            imageElement[i].onload = function () {
                imgLoaded++;
                setProgress(parseInt(imgLoaded / imgCount * 100));
            };

            imageElement[i].src = "img/" + imgList[i];
        }

        $(".container").on('swipeup', function (e) {
            if (currentState == State.Idel) {
                showNextPage();
            }
        });
        $(".container").on('swipedown', function (e) {
            if (currentState == State.Idel) {
                showPreviousPage();
            }
        });

        setTimeout(function () {
            currentState = State.Idel;
            $(".bottom_arrow").show();
        }, 1);

        var audioPlay = true;
        $(".music-icon").addClass("playback");
        $(".music-icon").on('tap', function () {
            $(".music-icon").toggleClass("playback");
            audioPlay = audioPlay ? false : true;
            if (audioPlay) {
                document.getElementById("audio-bg").play();
            } else {
                document.getElementById("audio-bg").pause();
            }
        });

        var style = document.createElement('style');
        style.type = 'text/css';
        style.innerHTML = '.movePage{animation:movePage 5000ms;-webkit-animation:movePage 5000ms;-moz-animation:movePage 5000ms;animation-fill-mode:forwards;-webkit-animation-fill-mode:forwards;-moz-animation-fill-mode:forwards}@keyframes movePage{0%{transform:translateY(0px)}100%{transform:translateY(-1027px)}}@-webkit-keyframes movePage{0%{-webkit-transform:translateY(0px)}100%{-webkit-transform:translateY(-1027px)}}';
        document.getElementsByTagName('head')[0].appendChild(style);
//    this.stylesheet = document.styleSheets[document.styleSheets.length - 1];
//    try {
//      this.stylesheet.insertRule('.movePage{animation:movePage 5000ms;-webkit-animation:movePage 5000ms;-moz-animation:movePage 5000ms;animation-fill-mode:forwards;-webkit-animation-fill-mode:forwards;-moz-animation-fill-mode:forwards}@keyframes movePage{0%{transform:translateY(0px)}100%{transform:translateY(-1027px)}}@-webkit-keyframes movePage{0%{-webkit-transform:translateY(0px)}100%{-webkit-transform:translateY(-1027px)}}', this.stylesheet.rules.length);
//    } catch (e) {
//    }

    })(jQuery, document);
</script>
</body>
</html>
